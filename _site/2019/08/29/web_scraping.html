<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!--  Website icon-->
  <link rel="icon" href="/img/favicon.svg">
  <title>
    Job Scraping - Being Frank.
    
  </title>

  <meta name="description" content="Back to top">
  
  <!--
  
  -->
  <!-- Meta information so sites like Facebook can find a title, description, and a thumbnail -->
  <meta property="og:title" content="Being Frank." />
  <meta property="og:url" content="http://localhost:4000" />
  

  <meta property="og:description" content="Why scrape the bottom of the barrel for a job when you can scrape the web for one!" />
  <!--
  <meta property="og:image" content="img/headshot.jpg">
  
  -->




  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2019/08/29/web_scraping.html">
  <link rel="alternate" type="application/rss+xml" title="Being Frank." href="/feed.xml">

  <!-- Collect tags from blog (see http://longqian.me/2017/02/09/github-jekyll-tag/) -->
  
  






  

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">
      <div class="masked" style="-webkit-mask-image: url(/img/home.png); mask-image: url(/img/home.png); vertical-align: top;"></div>
      Being Frank.
    </a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/about">
            <div class="masked" style="-webkit-mask-image: url(/img/user-images.png); mask-image: url(/img/user-images.png);"></div>
            About
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">
            <div class="masked" style="-webkit-mask-image: url(/img/quill.png); mask-image: url(/img/quill.png);"></div>
            Blog
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/webapps">
            <div class="masked" style="-webkit-mask-image: url(/img/apps.png); mask-image: url(/img/apps.png);"></div>
            Web Apps
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">
            <div class="masked" style="-webkit-mask-image: url(/img/paper.png); mask-image: url(/img/paper.png);"></div>
            Contact
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/subscribe">
          <div class="masked" style="-webkit-mask-image: url(/img/email.png); mask-image: url(/img/email.png);"></div>
            Subscribe!
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead" style="background-image: url('/img/emile-perron-xrVDYZRGdw4-unsplash.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Job Scraping</h1>
            
            <h2 class="subheading">Why scrape the bottom of the barrel for a job when you can scrape the web for one!</h2>
            
            <div class="tag">[
                
                <a href="/tag/data-science">data-science</a>
                ,
                
                <a href="/tag/machine-learning">machine-learning</a>
                ,
                
                <a href="/tag/web-scraping">web-scraping</a>
                ,
                
                <a href="/tag/tutorial">tutorial</a>
                
                
              ]</div>
            <span class="meta">Posted by
              <a href="#">Frank Cao</a>
              on August 29, 2019 &middot; <span class="reading-time" title="Estimated read time">
  
   35 mins  read </span>

            </span>
          </div>
          <div class="photo-cred">
            [ Background photo by <a href="https://unsplash.com/@emilep">Émile Perron on Unsplash</a> ]
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <p><a class="top-link hide" href="" id="js-top">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"></path></svg>
      <span class="screen-reader-text">Back to top</span>
      </a></p>

<!--
<script src="https://gist.github.com/franktcao/0683211eaf86f419dc8ea2f0eb85960c.js"></script>
-->

<p>This job search has been a bit more difficult than originally anticipated. There is a large overlap between what is done in physics and what is done in data science. Unfortunately,
the vocabulary is not quite compatible. So I decided that the best way to showcase my abilities (while keeping them in practice) 
is to scrape job postings to see what is desired in industry.</p>

<p>In this tutorial, we will begin to scrape <code>indeed.com</code> to compile a list of sought-after keywords that the current market is looking for. The overarching goal of this is to – other than finding a rewarding career that I absolutely love –  do statistical analysis on the vocabulary built out of what’s done here. We will start by using  <code>BeautifulSoup</code> to parse the search results, load them into <code>pandas</code>dataframes and saving them to <code>.csv</code> or <code>.json</code> files to process in the next tutorial.</p>

<p><strong>Note:</strong> Not all websites are so welcoming to having their data scraped. Sites like glassdoor, linkedin, facebook, and many others that have personal user information are particularly vigilant when it comes to crawlig/scraping. You can check to see which parts are dis/allowed by adding ‘/robots.txt’ to the main URL (e.g. www.linkedin.com/robots.txt).</p>

<p><strong>Note:</strong> The scraper depends on indeed’s website structure which you can parse through by right-clicking anywhere on the website and selecting Inspect (on Chrome, at least). So full discretion, this will <em>not</em> be the most stable way to get job postings from indeed. There is likely a more stable indeed API but I think this is a good exercise in web-scraping which is another important way to gather data. More so, many places will not provide an API to work with.</p>

<p>Let’s get started…</p>

<hr />

<h2 class="no_toc" id="contents">Contents</h2>

<ul id="markdown-toc">
  <li><a href="#1-setting-up" id="markdown-toc-1-setting-up">1. Setting Up</a>    <ul>
      <li><a href="#setting-up-for-success" id="markdown-toc-setting-up-for-success">Setting Up for Success</a></li>
    </ul>
  </li>
  <li><a href="#2-utilizing-beautifulsoup" id="markdown-toc-2-utilizing-beautifulsoup">2. Utilizing <code>BeautifulSoup</code></a>    <ul>
      <li><a href="#a-understanding-the-url" id="markdown-toc-a-understanding-the-url">a. Understanding the URL</a>        <ul>
          <li><a href="#1-inspecting-indeeds-website" id="markdown-toc-1-inspecting-indeeds-website">1. Inspecting Indeed’s Website</a></li>
          <li><a href="#2-setting-variables" id="markdown-toc-2-setting-variables">2. Setting Variables</a></li>
          <li><a href="#3-packaging-webpage" id="markdown-toc-3-packaging-webpage">3. Packaging Webpage</a></li>
        </ul>
      </li>
      <li><a href="#b-get-entriespostings" id="markdown-toc-b-get-entriespostings">b. Get Entries/Postings</a></li>
      <li><a href="#c-reading-through-a-single-posting" id="markdown-toc-c-reading-through-a-single-posting">c. Reading Through a Single Posting</a></li>
      <li><a href="#d-entry-example" id="markdown-toc-d-entry-example">d. Entry Example</a>        <ul>
          <li><a href="#1-getting-job-location" id="markdown-toc-1-getting-job-location">1. Getting Job Location</a></li>
          <li><a href="#2-getting-the-job-description" id="markdown-toc-2-getting-the-job-description">2. Getting the Job Description</a></li>
          <li><a href="#3-defining-all-methods-needed" id="markdown-toc-3-defining-all-methods-needed">3. Defining All Methods Needed</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#3-putting-it-all-together-full-example" id="markdown-toc-3-putting-it-all-together-full-example">3. Putting it All Together (Full Example)</a>    <ul>
      <li><a href="#a-setting-up" id="markdown-toc-a-setting-up">a. Setting Up</a></li>
      <li><a href="#b-looping-over-postings" id="markdown-toc-b-looping-over-postings">b. Looping Over Postings</a></li>
    </ul>
  </li>
  <li><a href="#4-conclusion" id="markdown-toc-4-conclusion">4. Conclusion</a></li>
  <li><a href="#comments" id="markdown-toc-comments">Comments!</a></li>
</ul>

<hr />

<h1 id="1-setting-up">1. Setting Up</h1>
<!--/*
You can find the notebook to follow along with the [notebook](https://www.github.com/franktcao/job_scraping/scrape_indeed.ipynb) or you can just go directly to the [full repository](https://www.github.com/franktcao/job_scraping/). First you will need to make sure you have the required modules. 
*/ -->
<p>You can follow along</p>
<ul>
  <li>with this <a href="https://colab.research.google.com/github/franktcao/job_scraping/blob/master/scrape_indeed.ipynb" target="\_blank"><u>interactive in-browser notebook</u></a> <sup>*</sup>,</li>
  <li>by downloading the <a href="https://github.com/franktcao/job_scraping/blob/master/scrape_indeed.ipynb" target="\_blank"><u>source</u></a> to work on it locally, or</li>
  <li>by going directly to the <a href="https://www.github.com/franktcao/job_scraping/" target="\_blank"><u>full repository</u></a>.</li>
</ul>

<p><sup>*</sup>The interactive notebook requires a google account to save a copy and run on their servers.</p>

<h2 id="setting-up-for-success">Setting Up for Success</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</code></pre></div></div>

<p>Below are the modules and why we use them:</p>
<ul>
  <li><code>sys</code>: Not really important, just a way to print out a progress bar.</li>
  <li><code>time</code>: We use this to really get the date so that we have a time stamp on each file we create. This way, if things break in the future, we still have a working example to apply the next stages.</li>
  <li><code>pandas</code>: If we’re going to be working with a fairly large table of data (memory-limited so if things were much heavier, we’d be querying from a database or some data distribution center), <code>pandas</code> is currently my favorite way to work with it.</li>
  <li><code>requests</code>: This module pulls a webpage in a format to be used to feed ino <code>BeautifulSoup</code> (from a URL string with the <code>get()</code> method).</li>
  <li><code>bs4</code>, <code>BeautifulSoup</code>: The meat and potatoes that takes the output <code>requests.get()</code> and allows you to parse through it with its built-in methods.</li>
</ul>

<p>Alright, let’s put the tools to work.</p>

<h1 id="2-utilizing-beautifulsoup">2. Utilizing <code>BeautifulSoup</code></h1>
<p>Now that we have our job query going, we want to pull job postings and fill out a table row-by-row with each posting.
So let’s see how we can use <code>BeautifulSoup</code> to do that. First let’s acknowledge what tools will be using i.e., import the required modules.</p>

<h2 id="a-understanding-the-url">a. Understanding the URL</h2>
<h3 id="1-inspecting-indeeds-website">1. Inspecting Indeed’s Website</h3>
<p>Let’s just go ahead and perform a search on <a href="https://www.indeed.com">indeed</a> for a data scientist position with a minimum annual salary of, let’s say, $20,000 in Boston.</p>

<p><a href="/img/job_scraping/ss_indeed.png"><img src="/img/job_scraping/ss_indeed.png" alt="Hey, look at you searching" width="100%" /></a></p>

<p>Note the address bar after you submit the search. It should look something, if not exactly, like this:</p>

<p><code> https://www.indeed.com/jobs?q=data+scientist+%2420%2C000&amp;l=Boston%2C+MA </code></p>

<p>Let’s break down what and why it looks like this. Our request was to look up job postings for ‘data scientist’ with ‘$20,000’ salary in Boston, MA. Everything after the <code>jobs?q=</code> reflects just that.</p>
<ul>
  <li><code>data+scientist</code> is pretty straightforward.</li>
  <li>The next piece, <code>%24</code>, is the URL escape code for the dollar sign ($).</li>
  <li>Following that is <code>20</code> and then the escape URL code for the comma <code>%2C</code> (,).</li>
  <li>Finally, we see <code>&amp;l=</code> and <code>Boston, MA</code> afer it. This indicates an additional requirement for the query to look for job postings where the <em>location variable</em>, <code>&amp;l=</code>, is Boston, Massachusetts.</li>
</ul>

<p>Knowing this structure allows us to know how to navigate the page without having to be on it and clicking through a series of intermediate steps. Also, this will become important later in this tutorial!</p>

<p>Maybe it’s overkill, but I like to break down each component of the URL in separate variables.</p>

<!--URL_page_start = '&start=' + str(page_number)-->
<!--URL_base = 'https://www.indeed.com/jobs?q=data+scientist+%2420%2C000'-->

<h3 id="2-setting-variables">2. Setting Variables</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">city</span> <span class="o">=</span> <span class="s">'boston'</span>
<span class="n">job</span> <span class="o">=</span> <span class="s">'data+scientist'</span>
<span class="n">min_sal</span> <span class="o">=</span> <span class="s">'</span><span class="si">%2420%2</span><span class="s">C000'</span>

<span class="n">URL_base</span> <span class="o">=</span> <span class="s">'https://www.indeed.com/jobs?q='</span> <span class="o">+</span> <span class="n">job</span> <span class="o">+</span> <span class="s">'+'</span> <span class="o">+</span> <span class="n">min_sal</span>
<span class="n">URL_location</span> <span class="o">=</span> <span class="s">'&amp;l='</span> <span class="o">+</span> <span class="n">city</span>

<span class="n">URL</span> <span class="o">=</span> <span class="n">URL_base</span> <span class="o">+</span> <span class="n">URL_location</span> 
</code></pre></div></div>

<p>With this URL, let’s grab the results page and feed it into <code>BeautifulSoup</code>.</p>

<h3 id="3-packaging-webpage">3. Packaging Webpage</h3>

<p>First, we use <code>requests</code> to get the results page. Then we make a <code>BeautifulSoup</code> class out of the webpage request.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s">'lxml'</span><span class="p">)</span>
</code></pre></div></div>

<p>The webpage is now in a nice class with useful methods that we can use to parse through and extract exactly what we want.</p>

<h2 id="b-get-entriespostings">b. Get Entries/Postings</h2>

<p>But how does it work? First, we need to know what we want so we can pinpoint what we need from <code>BeautifulSoup</code>. 
We’re going to want to eventually loop over the job postings so let’s identify what that is and see how <code>BeautifulSoup</code> can help.
Again, let’s inspect our results.</p>

<p>What will be really helpful is Chrome’s cursor tool on the top left (highlighted in blue in the image, left of ‘Elements’ and the mobile view).</p>

<p style="text-align: center"><a href="/img/job_scraping/ss_cursor.png"><img src="/img/job_scraping/ss_cursor.png" alt="Wow, you've already found the Easter Egg. Was it too easy?" width="50%" /></a></p>

<p>When you activate this tool, whatever element you hover over on the page, you’ll see the corresponding HTML that produced it. 
Taking a look, we see that when hovering over a single posting (highlighted in green and blue below), the corresponding <code>div</code> is highlighted on the right hand side 
(Yes, it sure does look like an ad but it’s not – it’s a screenshot. Dammit Google!):</p>

<p style="text-align: center"><a href="/img/job_scraping/ss_entry.png"><img src="/img/job_scraping/ss_entry.png" alt="Whroa" width="100%" /></a></p>

<p>And there’s a lot here. There’re a lot of different terms under <code>class</code>, there’s an <code>id</code>, there’s different <code>data-</code> attributes, etc. 
As you go through the different postings, you’ll see a couple different things common between all of them. 
The <code>class='row'</code> encompassed and best described the post.</p>

<p>So, using <code>BeautifulSoup</code>, we can get all of the entries on a single webpage via defining a method:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_entries</span><span class="p">(</span><span class="n">soup</span><span class="p">):</span>
    <span class="c1">#     entries = soup.find_all(name='div', attrs={'class':'row'}) # This way we can have a certain criteria
</span>    <span class="n">entries</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'div'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s">'row'</span><span class="p">)</span> <span class="c1"># This looks cleaner
</span>    <span class="k">return</span> <span class="n">entries</span>

<span class="n">entries</span> <span class="o">=</span> <span class="n">get_entries</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</code></pre></div></div>

<p>The first line in <code>get_entries()</code> is commented out but it’s another way to get the entries. It uses a dictionary of attributes to select exactly what you want, with multiple criteria. 
Instead, we use a – what I personally prefer and find simpler/cleaner – version where you explicitly state the common variables to extract what you want.</p>

<p>This returns a list of entries. At this current time, there are 18 job posting/results for a given page with pagination/links for next few pages of other postings.</p>

<h2 id="c-reading-through-a-single-posting">c. Reading Through a Single Posting</h2>

<p>For a given posting, what do we want? 
What immediately comes to mind is the company name, location, salary range, and a description/summary.</p>

<p>Look through a single job posting. There are lot of different attributes. Some obvious, some not. To start off, within the job post, there is a <code>class</code> with value <code>"title"</code>. 
This is the official job title that the company is seeking. Here are the common ones:</p>

<table align="center">
  <thead>
    <tr>
      <th>Class</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>title</code></td>
      <td>Job Title</td>
    </tr>
    <tr>
      <td><code>sjcl</code></td>
      <td>Company Info</td>
    </tr>
    <tr>
      <td><code>location</code></td>
      <td>Office Location</td>
    </tr>
    <tr>
      <td><code>salarySnippet</code></td>
      <td>Salary Range</td>
    </tr>
    <tr>
      <td><code>summary</code></td>
      <td>Job Summary</td>
    </tr>
  </tbody>
</table>

<p>Some things to note are that the data is not pristine: The format can change from one job posting to another (<code>sjcl</code>, <code>location</code>, …) – sometimes the values aren’t even there (<code>salarySnippet</code>, <code>location</code>, …)!</p>

<h2 id="d-entry-example">d. Entry Example</h2>
<h3 id="1-getting-job-location">1. Getting Job Location</h3>
<p>Let’s go through and see how we’d use <code>BeautifulSoup</code> to get one of these values. A more complicated one that comes to mind is the job location.
For one, it’s embedded in the company info. Also, the formatting varies from posting to posting.</p>

<p>The class enclosing the location is the <code>sjcl</code>. We can get this class from an entry by using the <code>BeautifulSoup</code> element’s <code>find()</code> method. 
Within an entry, we look for the class <code>'sjcl'</code> to pull the company info. Within that, we look for the location by <code>find()</code>ing the class <code>'location'</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_location_info</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="n">company_info</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'sjcl'</span><span class="p">)</span>
    <span class="n">location_info</span> <span class="o">=</span> <span class="n">company_info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'location'</span><span class="p">)</span>

    <span class="n">location</span> <span class="o">=</span> <span class="n">location_info</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="o">...</span>
</code></pre></div></div>

<p>Loaded into the <code>location</code> variable is everything within the HTML tags with <code>class="sjcl"</code> and also within <code>class="location"</code>.
The last line above extracts the text, not including any of the HTML, CSS, etc from the <code>text</code> member. Then we additionally use python’s <code>string</code> method <code>strip</code> to get rid of excess spaces.</p>

<p>Sometimes, the neighborhood is included. Within the <code>'location'</code>, the neighborhood, when there, is found within the <code>'span'</code> attribute.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_neighborhood</span><span class="p">(</span><span class="n">location_info</span><span class="p">):</span>
    <span class="n">neighborhood_info</span> <span class="o">=</span> <span class="n">location_info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'span'</span><span class="p">)</span>
    <span class="n">neighborhood</span> <span class="o">=</span> <span class="s">' '</span>
    <span class="k">if</span> <span class="n">neighborhood_info</span><span class="p">:</span>
        <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood_info</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">neighborhood</span>
</code></pre></div></div>

<p>Finishing our <code>get_location_info()</code> method, we can extract the location along with the neighborhood.
Let’s look at an example where this is applicable.</p>

<p style="text-align: center"><a href="/img/job_scraping/ss_neighborhood.png"><img src="/img/job_scraping/ss_neighborhood.png" alt="What time is it?" width="50%" /></a></p>

<p>We see on the third line of this screenshot is the location information with the neighborhood in parentheses. 
We’d like to keep the location and neighborhood as separate variables. So we redefine the location with the neighborhood stripped.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_location_info</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="c1"># Extract neightborhood info if it's there
</span>    <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">get_neighborhood</span><span class="p">(</span><span class="n">location_info</span><span class="p">)</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="n">neighborhood</span><span class="p">)</span>
    <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">'()'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">location</span><span class="p">,</span> <span class="n">neighborhood</span>

<span class="n">test_job_entry</span> <span class="o">=</span> <span class="n">entries</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">location</span><span class="p">,</span> <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">get_location_info</span><span class="p">(</span><span class="n">test_job_entry</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="2-getting-the-job-description">2. Getting the Job Description</h3>

<p>The job summary is nice but it’s often cut much too short: there is some word or character limit. Some descriptions don’t get to the substantial part until 
a bit later so the summary is inadequate. Getting the full job description is much trickier.</p>

<p>Getting the summary is simply:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_job_summary</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'summary'</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</code></pre></div></div>

<p>But we can go beyond that!</p>

<p>To get the full job description, we have to click on the job posting to go to the page of the actual posting.</p>

<p>Now, note the link. It may be a nasty thing.</p>

<p><code>https://www.indeed.com/viewjob?jk=466c648cf7a22a50&amp;tk=1dkuk8nat0gc8000&amp;from=serp&amp;vjs=3&amp;advn=6613095622180756&amp;adid=77005642&amp;sjdu=teYnAu8OgCGxABCwWD3OBGSvNPsXXaEnWLrUq8268_Q7hC0YDHACZYjlfAZ2VvRY5EESrqlz1VwWF8YSqa7ebseSPxZCuEl0hMQipV1VPT6vIRhbN2jzOprwFHzzg5eqCVENzzZ9i-4GTmNHGSUnm5ZkpfgPbmXOGU2P7n50pq-C5LGpOJGmAL5Loqy_5pM1WIA2dUwXdF02ymLel9jAy22GfZafOde6nrdo-YH9JMgK4xylf_Z_R6MGkuLZCpCX</code></p>

<p>How are we going to work with this beastly thing and do it so in an automated way? Well, from our experience earlier, we saw that there’s a lot of information in the URL. 
Maybe we don’t know what all of the tokens mean but we <em>do</em> know that the variables are separated by <code>&amp;var=</code>, where <code>var</code> is some variable. What’s more, if you’ve been observant
when looking through the individual job posting from our results page, you’ll see that the value from the attribute name <code>data-jk</code> is a unique id that also appears in the URL! 
And where does it show up? It shows up after <code>viewjob?</code> and subsequently after the URL variable <code>jk=</code>.</p>

<p>Try getting rid of everything except that. What you’re left with is this:</p>

<p><code>https://www.indeed.com/viewjob?jk=466c648cf7a22a50</code></p>

<p>and gets you to the same page. I assume the rest of the URL is for tracking and statistics purposes to understand what was the most effective way to bring you to the job posting.</p>

<p>Using this information along with knowing how to extract text from a webpage, we can add in functionality to go beyond the job summary and extract the job description.</p>

<p>First, we get the unique id or link.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_link</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s">'data-jk'</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">link</span> 

<span class="n">URL_job_desc</span> <span class="o">=</span> <span class="s">'https://www.indeed.com/viewjob?jk='</span> <span class="o">+</span> <span class="n">get_link</span><span class="p">(</span><span class="n">test_job_entry</span><span class="p">)</span>
</code></pre></div></div>

<p>Now we can use what we’ve done before to navigate to that page and pull the data that we want. Again, navigate to the page and inspect it.</p>

<p><a href="/img/job_scraping/ss_job-description.png"><img src="/img/job_scraping/ss_job-description.png" alt="Here's another one" width="100%" /></a></p>

<p>If we have the unique link, we can navigate straight to the page using <code>request.get()</code> again. This time, let’s include a pause with <code>time.sleep()</code> so that we do not 
trigger any response due to “suspicious” web traffic.</p>

<p>From my experience, the job description page is particularly messy. This is probably due to recruiters using
– likely – internal job postings with a certain format. Regardless, we can pull the text, touch it up now, and worry about the rest during the data cleaning stage. 
Just scanning a few examples, we see that many of the C escape sequences like <code>\n</code> and <code>\t</code> – a clear sign of copying and pasting the posting from different sources.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_job_description</span><span class="p">(</span><span class="n">job_page</span><span class="p">):</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">job_page</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Ensuring at least 1 second between page grabs
</span>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s">'lxml'</span><span class="p">)</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'div'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s">'jobsearch-jobDescriptionText'</span><span class="p">)</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span><span class="s">' '</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\t</span><span class="s">'</span><span class="p">,</span><span class="s">' '</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">description</span>

<span class="n">description</span> <span class="o">=</span> <span class="n">get_job_description</span><span class="p">(</span><span class="n">URL_job_desc</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="3-defining-all-methods-needed">3. Defining All Methods Needed</h3>

<p>I won’t go into each of these and feel free to leave a comment if you have any questions to clear anything up. 
I mix it up between using the dictionary way to gather (<code>attr=</code>) and using variables directly (<code>class_=</code>). 
There are also some methods with <code>try:</code> and <code>except:</code>. These are used to consider entries where the variable is subject
to change. If it’s not there, returning a <code>None</code> or a <code>NaN</code> can break the entire program.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_job_title</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="n">job_title_container</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'a'</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">'data-tn-element'</span><span class="p">:</span><span class="s">'jobTitle'</span><span class="p">})</span>
    <span class="n">job_title</span> <span class="o">=</span> <span class="n">job_title_container</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">job_title</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">get_company</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="n">company_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">test_entry</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'company'</span><span class="p">)</span>
        <span class="n">company_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test_entry</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> 
        <span class="n">company</span> <span class="o">=</span> <span class="n">company_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">test_entry</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'result-link-source'</span><span class="p">)</span>
            <span class="n">company_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test_entry</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> 
            <span class="n">company</span> <span class="o">=</span> <span class="n">company_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">company</span> <span class="o">=</span> <span class="s">' '</span>
    <span class="k">return</span> <span class="n">company</span>

<span class="k">def</span> <span class="nf">get_location_info</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="n">company_info</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'sjcl'</span><span class="p">)</span>
    <span class="n">location_info</span> <span class="o">=</span> <span class="n">company_info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'location'</span><span class="p">)</span>

    <span class="n">location</span> <span class="o">=</span> <span class="n">location_info</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="c1"># Extract neightborhood info if it's there
</span>    <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">get_neighborhood</span><span class="p">(</span><span class="n">location_info</span><span class="p">)</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="n">neighborhood</span><span class="p">)</span>
    <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s">'()'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">location</span><span class="p">,</span> <span class="n">neighborhood</span>


<span class="k">def</span> <span class="nf">get_neighborhood</span><span class="p">(</span><span class="n">location_info</span><span class="p">):</span>
    <span class="n">neighborhood_info</span> <span class="o">=</span> <span class="n">location_info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'span'</span><span class="p">)</span>
    <span class="n">neighborhood</span> <span class="o">=</span> <span class="s">' '</span>
    <span class="k">if</span> <span class="n">neighborhood_info</span><span class="p">:</span>
        <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood_info</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">neighborhood</span>

<span class="k">def</span> <span class="nf">get_salary</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="n">salary_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">salary</span> <span class="o">=</span> <span class="s">''</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">salary_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">'nobr'</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">salary</span> <span class="o">=</span> <span class="n">salary_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">salary_container</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'div'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s">'salarySnippet'</span><span class="p">)</span>
            <span class="n">salary_temp</span> <span class="o">=</span> <span class="n">salary_container</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'span'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s">'salary'</span><span class="p">)</span>
            <span class="n">salary_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">salary_temp</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="n">salary</span> <span class="o">=</span> <span class="n">salary_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">salary</span> <span class="o">=</span> <span class="s">' '</span>
    <span class="k">return</span> <span class="n">salary</span>

<span class="k">def</span> <span class="nf">get_job_summary</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">entry</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s">'summary'</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">get_link</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s">'data-jk'</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">link</span> 

<span class="k">def</span> <span class="nf">get_job_description</span><span class="p">(</span><span class="n">job_page</span><span class="p">):</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">job_page</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Ensuring at least 1 second between page grabs
</span>    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s">'lxml'</span><span class="p">)</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'div'</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s">'jobsearch-jobDescriptionText'</span><span class="p">)</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span><span class="s">' '</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'</span><span class="se">\t</span><span class="s">'</span><span class="p">,</span><span class="s">' '</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">description</span>
</code></pre></div></div>

<p>Now that we have all the methods we need to grab the relevant information, we can go ahead and make a list to loop through to extract several postings from several cities.</p>

<h1 id="3-putting-it-all-together-full-example">3. Putting it All Together (Full Example)</h1>
<h2 id="a-setting-up">a. Setting Up</h2>
<p>Again, looking at the results page, we see 18 postings per page. Since this is a variable based off indeed, let’s name the variable <code>POSTINGS_PER_PAGE</code>.
We’re looking to loop over cities we’re interested in and then loop over pages and loop over postings within the page. 
From there, we’ll construct a <code>pandas</code> dataframe with the variables that we’ll use in our machine learning and analysis stage.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">max_pages_per_city</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">POSTINGS_PER_PAGE</span> <span class="o">=</span> <span class="mi">18</span> <span class="c1"># Indeed's default 18 entries per page
</span><span class="n">postings_per_city</span> <span class="o">=</span> <span class="n">max_pages_per_city</span> <span class="o">*</span> <span class="n">POSTINGS_PER_PAGE</span> 

<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">'job_title'</span><span class="p">,</span> <span class="s">'company_name'</span><span class="p">,</span> <span class="s">'location'</span><span class="p">,</span> <span class="s">'neighborhood'</span><span class="p">,</span> <span class="s">'description'</span><span class="p">,</span> <span class="s">'salary'</span><span class="p">,</span> <span class="s">'link'</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="n">columns</span><span class="p">)</span> 
</code></pre></div></div>
<h2 id="b-looping-over-postings">b. Looping Over Postings</h2>

<p>I’m personally only interested with job postings in and around Boston so I’ll only include that in my <code>city_set</code> but this can be extended for your own use.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">URL_base</span> <span class="o">=</span> <span class="s">'https://www.indeed.com/jobs?q=data+scientist+</span><span class="si">%2420%2</span><span class="s">C000'</span>
<span class="c1"># Loop over cities
</span><span class="n">city_set</span> <span class="o">=</span> <span class="p">[</span><span class="s">'Boston'</span><span class="p">]</span>
<span class="k">for</span> <span class="n">city_targ</span> <span class="ow">in</span> <span class="n">city_set</span><span class="p">:</span>
    <span class="n">URL_location</span> <span class="o">=</span> <span class="s">'&amp;l='</span> <span class="o">+</span> <span class="n">city_targ</span>
    <span class="c1"># Loop over pages
</span>    <span class="k">for</span> <span class="n">page_number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">postings_per_city</span><span class="p">,</span> <span class="n">POSTINGS_PER_PAGE</span><span class="p">):</span>
        <span class="n">URL_page_start</span> <span class="o">=</span> <span class="s">'&amp;start='</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page_number</span><span class="p">)</span>
        <span class="n">URL</span> <span class="o">=</span> <span class="n">URL_base</span> <span class="o">+</span> <span class="n">URL_location</span> <span class="o">+</span> <span class="n">URL_page_start</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Ensuring at least 1 second between page grabs
</span>        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s">'lxml'</span><span class="p">)</span>
                      
        <span class="c1"># Loop over posts/entries
</span>        <span class="n">entries</span> <span class="o">=</span> <span class="n">get_entries</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">entry</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">entries</span><span class="p">):</span> 
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'</span><span class="se">\r</span><span class="s">'</span> <span class="o">+</span> <span class="s">' page: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page_number</span><span class="o">//</span><span class="n">POSTINGS_PER_PAGE</span><span class="p">)</span> 
                                  <span class="o">+</span> <span class="s">' / '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_pages_per_city</span><span class="p">)</span>  
                                  <span class="o">+</span> <span class="s">', job posting: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s">' / '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">entries</span><span class="p">))</span>
            <span class="p">)</span>        
            <span class="n">title</span> <span class="o">=</span> <span class="n">get_job_title</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
            <span class="n">company</span> <span class="o">=</span> <span class="n">get_company</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
            <span class="n">location</span><span class="p">,</span> <span class="n">neighborhood</span> <span class="o">=</span> <span class="n">get_location_info</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
            <span class="n">salary</span> <span class="o">=</span> <span class="n">get_salary</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">get_link</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
              
            <span class="n">job_page</span> <span class="o">=</span> <span class="s">'https://www.indeed.com/viewjob?jk='</span> <span class="o">+</span> <span class="n">link</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">get_job_description</span><span class="p">(</span><span class="n">job_page</span><span class="p">)</span>
              
            <span class="c1"># Append the new row with data scraped
</span>            <span class="n">i_next</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i_next</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">title</span><span class="p">,</span> <span class="n">company</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">neighborhood</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">salary</span><span class="p">,</span> <span class="n">link</span><span class="p">]</span>
              
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="n">date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
  
<span class="c1"># Saving dataframe as local csv file 
</span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">date</span> <span class="o">+</span> <span class="s">'_indeed-ds-postings.csv'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">'utf-8'</span><span class="p">)</span>
</code></pre></div></div>

<p>At the very end, we save the data in a comma-separated values (CSV) format with the date to be used in the next stages.
The date is important to not overwrite your data on different days but also if there are any changes to indeed’s website formatting, 
we still have a working copy to work with for the next stages, with the present scripts.</p>

<h1 id="4-conclusion">4. Conclusion</h1>
<p>There, you have it! To review, we’ve</p>
<ul>
  <li>Used <code>requests</code> to pull webpages from its URL</li>
  <li>Seen how <code>BeautifulSoup</code> takes in the output from <code>requests.get()</code> and has built-in functions to extract elements of the page</li>
  <li>Inspected pages to see how to extract the information, once we’ve figured out what we want</li>
  <li>Inspected the URL to understand what parts are relevant and what’s fluff</li>
  <li>Got to see some data like the job description being very varied from posting to posting</li>
  <li>Used <code>pandas</code> dataframe to load in data relevant and important to us</li>
  <li>Saved the dataframe as a more universal CSV format for future stages</li>
</ul>

<p>What we’ll do in the next tutorial is clean and format the data in a more suitable format for our TFIDF, salary regression, and any other future analysis we come up with. 
Please leave a comment and provide from feedback. I know it might be a little too detailed in some areas and not enough in other areas. I can make updates to extend on them
or even answer them personally.</p>

<hr />

<h1 style="text-align: center;" id="comments">Comments!</h1>

<script src="https://kit.fontawesome.com/9d39d89011.js"></script>

<form method="POST" action="https://formspree.io/franktcao@gmail.com">
  <div class="control-group">
    <!--<div class="form-group floating-label-form-group controls">-->
    <div class="form-group">
      <span class="input-group-addon"><i class="fa fa-user fa-fw"></i></span>
      <label>Name*</label>
      <input type="text" name="Name" class="form-control" placeholder="Dave Chappelle" id="name" required="" data-validation-required-message="First and last name, please." />
      <p class="help-block text-danger"></p>
    </div>
  </div>
  <div class="control-group">
    <div class="form-group">
		<span class="input-group-addon"><i class="fa fa-envelope-o fa-fw"></i></span>
      <label>Email Address*</label>
      <input type="email" name="Email Address" class="form-control" placeholder="user@site.com" id="email" required="" data-validation-required-message="Please enter your email address." />
      <p class="help-block text-danger"></p>
    </div>
  </div>
  
  <div class="control-group">
    <div class="form-group">
      <label>Comment*</label>
      <textarea rows="5" name="Comment" class="form-control" placeholder="What I think about this post is..." id="message" required="" data-validation-required-message="Please write a comment."></textarea>
      <p class="help-block text-danger"></p>
    </div>
  </div>
  <br />
  <div id="success"></div>
  <div class="form-group">
    <center>
    <button type="submit" class="btn btn-primary" id="sendMessageButton">Send</button>
    </center>
  </div>
</form>

<!---
|-----------------+------------+-----------------+----------------|
| Default aligned |Left aligned| Center aligned  | Right aligned  |
|-----------------|:-----------|:---------------:|---------------:|
| First body part |Second cell | Third cell      | fourth cell    |
| Second line     |foo         | **strong**      | baz            |
| Third line      |quux        | baz             | bar            |
|-----------------+------------+-----------------+----------------|
| Second body     |            |                 |                |
| 2 line          |            |                 |                |
|=================+============+=================+================|
| Footer row      |            |                 |                |
|-----------------+------------+-----------------+----------------|

---->

\[\begin{align*}
&amp; \phi(x,y) = \phi \left(\sum_{i=1}^n x_ie_i, \sum_{j=1}^n y_je_j \right)
  = \sum_{i=1}^n \sum_{j=1}^n x_i y_j \phi(e_i, e_j) = \\
    &amp; (x_1, \ldots, x_n) \left( \begin{array}{ccc}
        \phi(e_1, e_1) &amp; \cdots &amp; \phi(e_1, e_n) \\
        \vdots &amp; \ddots &amp; \vdots \\
        \phi(e_n, e_1) &amp; \cdots &amp; \phi(e_n, e_n)
        \end{array} \right)
    \left( \begin{array}{c}
        y_1 \\
        \vdots \\
        y_n
        \end{array} \right)
\end{align*}\]

<!--
The following is a math block:

$$ 5 + 5 $$

But next comes a paragraph with an inline math statement:

\$$ 5 + 5 $$
| Meaning | 
|:-:            
| The job title 
| The job title 
| The job title 
| The job title 
| The job title 
#myBtn {
  display: none; /* Hidden by default */
  position: fixed; /* Fixed/sticky position */
  bottom: 20px; /* Place the button at the bottom of the page */
  right: 30px; /* Place the button 30px from the right */
  z-index: 99; /* Make sure it does not overlap */
  border: none; /* Remove borders */
  outline: none; /* Remove outline */
  background-color: red; /* Set a background color */
  color: white; /* Text color */
  cursor: pointer; /* Add a mouse pointer on hover */
  padding: 15px; /* Some padding */
  border-radius: 10px; /* Rounded corners */
  font-size: 18px; /* Increase font size */
}

#myBtn:hover {
  background-color: #555; /* Add a dark-grey background on hover */
}
//Get the button:
mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
          mybutton.style.display = "block";
            } else {
                  mybutton.style.display = "none";
                    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}
 -->


        <hr>

        <div class="clearfix">

          
          
          <a class="btn btn-primary float-right" href="/life/2019/10/23/what_makes_today_successful.html" data-toggle="tooltip" data-placement="top" title="What Will Make Today Successful for Me?">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->
<!-- Begin Web-Stat code v 6.3 -->
<span id="wts1900354">&nbsp;</span><script>
var wts=document.createElement('script');wts.type='text/javascript';
wts.async=true;wts.src='https://wts.one/4/1900354/log6_2.js';
document.getElementById('wts1900354').appendChild(wts);
</script><noscript><a href="https://www.web-stat.com">
<img src="https://wts.one/6/4/1900354.gif" 
alt="Web-Stat traffic analysis"></a></noscript>
<!-- End Web-Stat code v 6.3 -->
<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:franktcao@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          <li class="list-inline-item">
            <a href="https://www.linkedin.com/in/franktcao">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://github.com/franktcao">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Frank Cao 2021</p>
        <p class="copyright text-muted">[ Navigation bar and favicon icons by <a href="https://www.flaticon.com/authors/pixel-perfect/filled/">Pixel perfect on FlatIcon</a> ] </p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>



</body>

</html>
